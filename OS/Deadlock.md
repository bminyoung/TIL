

# Deadlock

> 교착상태
>
> 대기중인 프로세스가 요청한 자원들이 `다른 대기중인 프로세스`에 의해서 점유되어 있기 때문에 프로세스 상태를 변경시킬 수 없는 상태
>
> "두 기차가 교차로에서 서로 접근할 때, 둘 다 정지해야하며 상대방이 없어지지 않으면 누구도 다시 출발할 수 없음"

## 1. 시스템 모델

> 시스템은 경쟁하는 스레드에 분배돼야 할 유한한 자원들로 구성

- mutex, 세마포 등의 동기화 도구도 시스템 자원
  - 가장 일반적인 교착 상태의 발원지
- 프로세스의 자원 사용 순서
  1. **요청**: 자원을 요청, 바로 요청이 허용되지 않으면 대기함
  2. **사용**: 자원에 대한 작업을 수행
  3. **방출**: 자원을 방출



## 2. 다중 스레드 응용에서 교착 상태

```
# 스레드1
lock(mutex1)
lock(mutex2)
...
unlock(mutex2)
unlock(mutex1)

# 스레드1
lock(mutex2)
lock(mutex1)
...
unlock(mutex1)
unlock(mutex2)
```

- 스레드1이 mutex1획득, 스레드2가 mutex2를 획득하면 교착상태에 빠짐



#### 1) 라이브락

> 스레드가 실패한 행동을 계속해서 시도할 때 발생

- 예시: 복도에서 한 사람은 오른쪽, 한 사람은 왼쪽으로 움직이면 서로를 방해

  -> 한 사람은 왼쪽, 한 사람은 오른쪽으로 이동하면 여전히 서로를 방해 -> 반복 ...

