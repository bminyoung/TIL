# 전처리기(Preprocessor)
> 컴파일 전에 실행된다.

- #define, #include, #if, #else, ...

## 1. #include
> C 프로그램은 소스 파일 여러 개로 나누어 작성할 수 있다.
> 이 때 관련 함수, 변수끼리 하나의 파일로 모아서 작성하면 좋다.
> 이렇게 작성한 파일을 다른 파일에서 참조해야 하는 경우 헤더 파일을 사용한다.
> 헤더 파일을 사용하려면 #include 문을 써준다.

```c
#include <라이브러리 헤더>
#include "사용자 정의 헤더"
```

```c
#include <stdio.h>
#include <stdlib.h>

#include "Person.h"
#include "Store.h"
```
- <> 안에 헤더 파일을 써주면 전처리기는 `C 컴파일러의 포함 경로`에서 헤더 파일을 찾는다.
	- 포함 경로: 컴파일러가 제공하는 표준 라이브러리의 헤더 파일이 있는 폴더
- "" 안에 헤더 파일을 써주면 전처리기는 `소스파일이 있는 폴더`에서 헤더 파일을 찾는다.



## 2. #define
- #define 전처리 문장을 매크로라고 한다.
- 매크로 상수, 매크로 함수로 나눌 수 있다.

### 1) 매크로 상수
```c
#define [매크로명] [값]
```

```c
// ex
#define PI 3.1415
#define MAX 10000
```

- #definde문 끝에는 세미콜론을 붙이지 않는다.
- 매크로 **상수**의 값은 변경할 수 없다. 
- 함수명이나 데이터형도 정의할 수 있다.
```c
#define PRT printf
PRT("Hello World!);

#define UINT unsigned int
UINT number;
```

### 2) 매크로 함수
```c
#define [매크로 함수명] (인자) [내용]
```

```c
// === ex ===
#define SQUARE(a) a*a
int sq = SQUARE(2);
// int sq = 2*2; 와 같다

/* 주의: 매크로는 함수가 아니다! */
int square = SQUARE(1+2);
// int square = 1+2*1+2; 와 같다 (코드를 치환, 대치만 한다)
// => square 에는 1+(2*1)+2를 계산한 5가 대입된다
// #define SQUARE(a) ((a)*(a)) 로 고치면 해결 가능

// === ex2 ===
#define SQUARE(a) ((a)*(a))
int n = 2;
int square2 = SQUARE(++n);
// square2 = ((++n)*(++n)); 와 같다
// SQUARE(3)을 호출하는 것이 아니다
```

- #define 문은 한 줄로만 작성해야 한다.
- 여러 줄로 써야할 때는 라인 끝에 \를 써준다.
```c
#define EVENODD(n) if(n % 2 == 0) \
						printf("even"); \
				   else \
					    printf("odd");
```

##### 장점
- 매크로 함수를 사용하면 함수 호출의 오버헤드를 줄일 수 있다.
	- 함수가 아니기 때문에 함수 호출이 일어나지 않는다.
- 일반 함수로 구현할 수 없는 기능을 처리할 수도 있다.
	- 라이브러리, 복잡한 프로그램에서 사용한다.

##### 단점
- 매크로 함수를 많이 사용하면 프로그램의 크기가 커진다.
	- 일반 함수는 한 번 컴파일하고 필요할 때 호출해서 사용하기만 한다.
- 코드를 알아보기 어려워진다.